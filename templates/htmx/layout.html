<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="BlockPy">
    <title>{% block title %}{% endblock %} - BlockPy HTMX</title>
    <meta property="og:title" content="BlockPy"/>
    <meta property="og:site_name" content="BlockPy Server"/>
    <meta property="og:description"
          content="BlockPy is a web-based Python environment that lets you work with blocks, text, or both. Designed for Data Science and equipped with powerful tools like the State Explorer and Guided Feedback, the goal of BlockPy is to let you solve authentic, real-world problems."/>

    <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicon.ico') }}">

    <!-- Bootstrap CSS -->
    {% assets "libs_css" %}
        <link rel="stylesheet" href="{{ ASSET_URL }}"/>
    {% endassets %}

    <!-- HTMX from CDN (or local fallback) -->
    <script src="https://unpkg.com/htmx.org@1.9.10" 
            integrity="sha384-D1Kt99CQMDuVetoL1lrYwg5t+9QdHe7NLX/SoJYkXDFfX37iInKRy5xLSi8nO7UC" 
            crossorigin="anonymous"></script>

    <script type="text/javascript">
        // Use $URL_ROOT to access all URLS on the server
        window.$URL_ROOT = {{ request.url_root|tojson|safe }};
        window.accessToken = {{ (g.access_token or "")|tojson }}
    </script>

    <style>
        .htmx-indicator {
            display: none;
        }
        .htmx-request .htmx-indicator {
            display: inline-block;
        }
        .htmx-request.htmx-indicator {
            display: inline-block;
        }
        {% block extracss %}
        {% endblock %}
    </style>

    {% block extrahead %}
    {% endblock %}
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="{{ url_for('htmx_routes.index') }}">BlockPy HTMX</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('htmx_routes.index') }}">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('htmx_routes.courses') }}">Courses</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('htmx_routes.examples') }}">Examples</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('basic.index') }}">Classic Version</a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    {% if g.user and not g.user.anonymous %}
                        <li class="nav-item">
                            <span class="navbar-text">{{ g.user.name() }}</span>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('security.logout') }}">Logout</a>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('security.login') }}">Login</a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container mt-4">
        {% block body %}
        {% endblock %}
    </div>

    <!-- Footer -->
    <footer class="mt-5 py-3 bg-light">
        <div class="container text-center">
            <small class="text-muted">BlockPy HTMX Version - Experimental</small>
        </div>
    </footer>

    {% block extrajs %}
    {% endblock %}
</body>
</html>
